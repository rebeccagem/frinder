<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>
    <!-- <script src="https://code.jquery.com/jquery.js"></script> -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./style.css">

</head>

<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <div class="navbar-header">
                <h1>Friend Finder</h1>
                <h6>Share a bit about what you like to eat and we'll try to match you with a new friend for a meal you both enjoy.</h6>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="row">
            <div class="input-group mb-3">
                <input id="name" type="text" class="form-control" placeholder="Your Name" aria-label="Username" aria-describedby="basic-addon1">
            </div>
        </div>
        <div class="row">
            <div class="input-group mb-3">
                <input class="form-control" type="text" placeholder="Photo Link" id="photo">
            </div>
        </div>
        <div class="row" id="american">
            <h4>How do you like burgers?</h4>
            <div class="slidecontainer">
                <input type="range" min="1" max="10" value="5" class="slider" id="aRange">
                <p>Value:
                    <span id="aSlider"></span>
                </p>
            </div>
        </div>
        <div class="row" id="pizza">
            <h4>How about pizza?</h4>
            <div class="slidecontainer">
                <input type="range" min="1" max="10" value="5" class="slider" id="bRange">
                <p>Value:
                    <span id="bSlider"></span>
                </p>
            </div>
        </div>
        <div class="row" id="japanese">
            <h4>Sushi?</h4>
            <div class="slidecontainer">
                <input type="range" min="1" max="10" value="5" class="slider" id="cRange">
                <p>Value:
                    <span id="cSlider"></span>
                </p>
            </div>
        </div>
        <div class="row" id="sandwhich">
            <h4>What about a simple sandwhich?</h4>
            <div class="slidecontainer">
                <input type="range" min="1" max="10" value="5" class="slider" id="dRange">
                <p>Value:
                    <span id="dSlider"></span>
                </p>
            </div>
        </div>
        <div class="row" id="italian">
            <h4>Do you enjoy italian?</h4>
            <div class="slidecontainer">
                <input type="range" min="1" max="10" value="5" class="slider" id="eRange">
                <p>Value:
                    <span id="eSlider"></span>
                </p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <button type="submit" id="submit" class="btn btn-secondary btn-lg btn-block">FIND YOUR NEW FRIEND >></button>
        </div>
    </div>
    <!-- MODAL -->
    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal">&times;</button>

                </div>
                <div class="modal-body">
                    <h2 class="modal-title">You should grab a meal with </h2>
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="" alt="">
                </div>
                <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div> -->
            </div>
        </div>
    </div>
    <!-- FOOTER -->
    <div class="navbar navbar-default fixed-bottom ">
        <div class="container footer-txt">
            <div class="justify-content-end">
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="../api/friends">API Friends List</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script type="text/javascript">
        var slider1 = document.getElementById("aRange");
        var output1 = document.getElementById("aSlider");
        output1.innerHTML = slider1.value;

        slider1.oninput = function () {
            output1.innerHTML = this.value;
        }
        var slider2 = document.getElementById("bRange");
        var output2 = document.getElementById("bSlider");
        output2.innerHTML = slider2.value;

        slider2.oninput = function () {
            output2.innerHTML = this.value;
        }
        var slider3 = document.getElementById("cRange");
        var output3 = document.getElementById("cSlider");
        output3.innerHTML = slider1.value;

        slider3.oninput = function () {
            output3.innerHTML = this.value;
        }

        var slider4 = document.getElementById("dRange");
        var output4 = document.getElementById("dSlider");
        output4.innerHTML = slider1.value;

        slider4.oninput = function () {
            output4.innerHTML = this.value;
        }

        var slider5 = document.getElementById("eRange");
        var output5 = document.getElementById("eSlider");
        output5.innerHTML = slider1.value;

        slider5.oninput = function () {
            output5.innerHTML = this.value;
        }

        // gets answers from survey
        $("#submit").on("click", function (event) {
            event.preventDefault();
            console.log("You Clicked!");
            var newFriend = {
                name: $("#name").val().trim(),
                photo: $("#match-img").val().trim(),
                scores: [slider1.value, slider2.value, slider3.value,slider4.value,slider5.value]


            };

            // posts new friend to api
            $.post("/api/friends", newFriend, function (data) {
                data = JSON.parse(data);
                console.log("hi: " + data);
                if (data) {

                    console.log("hi");
                    $("#match-name").text(data.name);
                    $("#match-img").attr("src", data.photo);
                    $("#results-modal").modal("toggle");
                    // $('#results-modal').modal(show);
                } else console.log("error?")
            });

            console.log("lalalala: " + newFriend);


        });
    </script>

</body>

</html>